import{i as l,w as c}from"./wait-BlTzaSj7.js";/**
 * Invoice Ninja (https://invoiceninja.com).
 *
 * @link https://github.com/invoiceninja/invoiceninja source repository
 *
 * @copyright Copyright (c) 2021. Invoice Ninja LLC (https://invoiceninja.com)
 *
 * @license https://www.elastic.co/licensing/elastic-license
 */class i{constructor(){this.mollie=Mollie(document.querySelector("meta[name=mollie-profileId]")?.content,{testmode:document.querySelector("meta[name=mollie-testmode]")?.content,locale:"en_US"})}createCardHolderInput(){let t=this.mollie.createComponent("cardHolder");t.mount("#card-holder");let n=document.getElementById("card-holder-error");return t.addEventListener("change",function(e){e.error&&e.touched?n.textContent=e.error:n.textContent=""}),this}createCardNumberInput(){let t=this.mollie.createComponent("cardNumber");t.mount("#card-number");let n=document.getElementById("card-number-error");return t.addEventListener("change",function(e){e.error&&e.touched?n.textContent=e.error:n.textContent=""}),this}createExpiryDateInput(){let t=this.mollie.createComponent("expiryDate");t.mount("#expiry-date");let n=document.getElementById("expiry-date-error");return t.addEventListener("change",function(e){e.error&&e.touched?n.textContent=e.error:n.textContent=""}),this}createCvvInput(){let t=this.mollie.createComponent("verificationCode");t.mount("#cvv");let n=document.getElementById("cvv-error");return t.addEventListener("change",function(e){e.error&&e.touched?n.textContent=e.error:n.textContent=""}),this}handlePayNowButton(){if(document.getElementById("pay-now").disabled=!0,document.querySelector("input[name=token]").value!=="")return document.querySelector("input[name=gateway_response]").value="",document.getElementById("server-response").submit();this.mollie.createToken().then(function(t){let n=t.token,e=t.error;if(e){document.getElementById("pay-now").disabled=!1;let a=document.getElementById("errors");a.innerText=e.message,a.hidden=!1;return}let o=document.querySelector('input[name="token-billing-checkbox"]:checked');o&&(document.querySelector('input[name="store_card"]').value=o.value),document.querySelector("input[name=gateway_response]").value=n,document.querySelector("input[name=token]").value="",document.getElementById("server-response").submit()})}handle(){this.createCardHolderInput().createCardNumberInput().createExpiryDateInput().createCvvInput(),Array.from(document.getElementsByClassName("toggle-payment-with-token")).forEach(t=>t.addEventListener("click",n=>{document.getElementById("mollie--payment-container").classList.add("hidden"),document.getElementById("save-card--container").style.display="none",document.querySelector("input[name=token]").value=n.target.dataset.token})),document.getElementById("toggle-payment-with-credit-card").addEventListener("click",t=>{document.getElementById("mollie--payment-container").classList.remove("hidden"),document.getElementById("save-card--container").style.display="grid",document.querySelector("input[name=token]").value=""}),document.getElementById("pay-now").addEventListener("click",()=>this.handlePayNowButton())}}function d(){new i().handle();const r=document.querySelectorAll("input.toggle-payment-with-token");r.length>0&&r[0].click()}l()?d():c("#mollie-credit-card-payment").then(()=>d());
